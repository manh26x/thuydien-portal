<p-panel header="{{'list' | translate}}">
  <ng-template pTemplate="icons">
    <button class="p-panel-header-icon p-link" (click)="refreshSearch()" pTooltip="{{'btn.refresh' | translate}}" tooltipPosition="bottom">
      <i class="pi pi-refresh"></i>
    </button>
  </ng-template>
  <form class="p-grid p-fluid p-mb-3" [formGroup]="formFilter">
    <div class="p-md-3 p-col-6 p-field">
      <label>{{'tool.name' | translate}}</label>
      <input type="text" pInputText placeholder="{{'search' | translate}}" formControlName="searchValue" />
    </div>

    <div class="p-md-3 p-col-6 p-field">
      <label>{{'tool.status' | translate}}</label>
      <p-dropdown formControlName="status" [options]="statusList" dataKey="code" optionLabel="name"></p-dropdown>
    </div>
    <div class="p-md-2 p-col-6 p-field">
      <label>{{'tool.customerType' | translate}}</label>
      <p-dropdown formControlName="customerType" [options]="customerTypeList" optionLabel="title" dataKey="id"></p-dropdown>
    </div>
    <div class="p-md-2 p-col-6 p-field">
      <label>{{'tool.level' | translate}}</label>
      <p-dropdown formControlName="level" [options]="levelList" dataKey="code" optionLabel="name"></p-dropdown>
    </div>
    <div class="p-md-2 p-col-12 p-field p-d-flex p-align-end">
      <button (click)="searchListTool()" pButton type="button" label="{{'filter' | translate}}" class="p-button-secondary" style="height: 46px"></button>
    </div>
  </form>

  <p-table
    [paginator]="true"
    [rows]="10"
    [totalRecords]="toolList.length"
    [rowsPerPageOptions]="[10, 20, 50, 100]"
    [showCurrentPageReport]="true"
    currentPageReportTemplate="{{ 'paging' | translate }}"
    [value]="toolList">
    <ng-template pTemplate="header">
      <tr>
        <th style="width: 50px;">{{'no' | translate}}</th>
        <th pSortableColumn="customerType">{{'tool.customerType' | translate}}<p-sortIcon field="customerType"></p-sortIcon></th>
        <th pSortableColumn="toolName">{{'tool.name' | translate}}<p-sortIcon field="toolName"></p-sortIcon></th>
        <th pSortableColumn="status">{{'tool.status' | translate}}<p-sortIcon field="status"></p-sortIcon></th>
        <th pSortableColumn="priority">{{'tool.level' | translate}}<p-sortIcon field="priority"></p-sortIcon></th>
        <th>{{'tool.action' | translate}}</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-tool let-index="rowIndex">
      <tr>
        <td>{{index + 1}}</td>
        <td>{{tool.customerType}}</td>
        <td>{{tool.toolName}}</td>
        <td>
          <ng-container [ngSwitch]="tool.status">
            <ng-container *ngSwitchCase="toolConst.STATUS_ACTIVE">
              <div>{{'const.active' | translate}}</div>
            </ng-container>
            <ng-container *ngSwitchCase="toolConst.STATUS_INACTIVE">
              <div>{{'const.inactive' | translate}}</div>
            </ng-container>
            <ng-container *ngSwitchDefault>-</ng-container>
          </ng-container>
        <td>
          <ng-container [ngSwitch]="tool.priority">
            <ng-container *ngSwitchCase="toolConst.LEVEL_NORMAL">
              <div>{{'const.levelNormal' | translate}}</div>
            </ng-container>
            <ng-container *ngSwitchCase="toolConst.LEVEL_IMPORTANT">
              <div>{{'const.levelImportant' | translate}}</div>
            </ng-container>
            <ng-container *ngSwitchCase="toolConst.LEVEL_VERY_IMPORTANT">
              <div>{{'const.levelVeryImportant' | translate}}</div>
            </ng-container>
            <ng-container *ngSwitchDefault>-</ng-container>
          </ng-container>
        </td>
        <td>
          <p-inputSwitch [(ngModel)]="tool.isActive" (onChange)="doChangeStatus(index)"></p-inputSwitch>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage" let-columns>
      <tr>
        <td [attr.colspan]="6">
          {{'noData' | translate}}
        </td>
      </tr>
    </ng-template>
  </p-table>
</p-panel>
